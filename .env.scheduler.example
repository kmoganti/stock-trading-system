# Trading Strategy Scheduler Environment Configuration
# ================================================
# Copy this to your .env file and adjust values as needed

# ============================================================================
# SCHEDULER CONFIGURATION
# ============================================================================

# Master Scheduler Control
ENABLE_SCHEDULER=true

# Strategy-Specific Enables
ENABLE_DAY_TRADING_SCHEDULER=true
ENABLE_SHORT_SELLING_SCHEDULER=true  
ENABLE_SHORT_TERM_SCHEDULER=true
ENABLE_LONG_TERM_SCHEDULER=true

# ============================================================================
# STRATEGY EXECUTION FREQUENCIES (in minutes)
# ============================================================================

# Day Trading: High-frequency execution for gap analysis and breakouts
# Recommended: 5-15 minutes during market hours
# Current optimal: 5 minutes (based on 185 signals, 94.6% quality rate)
DAY_TRADING_FREQUENCY=5

# Short Selling: Monitor overbought conditions and resistance rejections  
# Recommended: 15-60 minutes during market hours
# Current optimal: 30 minutes (based on 14 signals, 78.6% quality rate) 
SHORT_SELLING_FREQUENCY=30

# Short Term: Swing trading and trend following signals
# Recommended: 60-240 minutes (1-4 hours)
# Current optimal: 120 minutes (2 hours)
SHORT_TERM_FREQUENCY=120

# Long Term: Comprehensive daily analysis after market close
# Recommended: 1440 minutes (daily) 
# Current optimal: 1440 minutes (once daily at 4 PM)
LONG_TERM_FREQUENCY=1440

# ============================================================================  
# MARKET HOURS CONFIGURATION (IST Timezone)
# ============================================================================

# Regular Market Hours: 9:15 AM - 3:30 PM IST
MARKET_START_HOUR=9
MARKET_START_MINUTE=15
MARKET_END_HOUR=15
MARKET_END_MINUTE=30

# ============================================================================
# EXTENDED HOURS ANALYSIS
# ============================================================================

# Pre-Market Analysis (8:00 AM - 9:15 AM IST)
# Enables gap analysis and opening preparation
ENABLE_PRE_MARKET_ANALYSIS=true

# Post-Market Analysis (3:30 PM - 6:00 PM IST)  
# Enables end-of-day screening and next-day preparation
ENABLE_POST_MARKET_ANALYSIS=true

# ============================================================================
# RESOURCE MANAGEMENT
# ============================================================================

# Maximum number of strategies that can run simultaneously
# Recommended: 2-4 based on system resources
MAX_CONCURRENT_STRATEGIES=3

# Maximum execution time per strategy (in minutes)
# Prevents hanging processes and ensures timely execution
STRATEGY_TIMEOUT_MINUTES=15

# ============================================================================
# PERFORMANCE OPTIMIZATION SETTINGS
# ============================================================================

# Based on backtest analysis results:

# Risk Management - optimized based on 30-day backtest
RISK_PER_TRADE=0.025                    # 2.5% per trade (increased from 2% based on 1.88:1 avg R/R)
MAX_POSITIONS=12                        # Increased for diversification  
MIN_CONFIDENCE_THRESHOLD=0.65           # Based on 75% average confidence

# Strategy Quality Filters
VOLUME_CONFIRMATION_MULTIPLIER=0.8      # Relaxed from 0.9 based on analysis
MOMENTUM_THRESHOLD=0.015                # 1.5% momentum requirement
REQUIRE_TREND_CONFIRMATION=true         # Must be above EMA50 for buy signals

# Sector Diversification (New)
MAX_SECTOR_EXPOSURE=0.30                # 30% max exposure per sector
ENABLE_SECTOR_DIVERSIFICATION=true      # Force diversification

# ============================================================================
# TRADING PRODUCT CONFIGURATION
# ============================================================================

# Allow short selling (based on short selling backtest results)
ALLOW_SHORT_SELLING=true

# Default product types for different strategies
DEFAULT_BUY_PRODUCT=NORMAL              # For long-term positions  
DEFAULT_SELL_PRODUCT=NORMAL             # For closing long positions
SHORT_SELL_PRODUCT=INTRADAY            # For initiating short positions
DAY_TRADING_PRODUCT=INTRADAY           # For day trading positions

# ============================================================================
# NOTIFICATION CONFIGURATION
# ============================================================================

# Telegram notifications for scheduler events
TELEGRAM_NOTIFICATIONS_ENABLED=true
TELEGRAM_BOT_ENABLED=true

# Add your Telegram credentials here:
# TELEGRAM_BOT_TOKEN=your_bot_token_here
# TELEGRAM_CHAT_ID=your_chat_id_here

# ============================================================================
# ENVIRONMENT-SPECIFIC OVERRIDES
# ============================================================================

# Development Environment - More frequent execution for testing
# Uncomment for development/testing:
# DAY_TRADING_FREQUENCY=2              # Every 2 minutes for rapid testing
# SHORT_SELLING_FREQUENCY=10           # Every 10 minutes
# SHORT_TERM_FREQUENCY=30              # Every 30 minutes

# Production Environment - Conservative frequencies
# Uncomment for production:
# DAY_TRADING_FREQUENCY=10             # Every 10 minutes (more conservative)
# SHORT_SELLING_FREQUENCY=60           # Every hour
# MAX_CONCURRENT_STRATEGIES=2          # Lower concurrency for stability

# High Volatility Environment - Increased frequency
# Uncomment during high volatility periods:
# DAY_TRADING_FREQUENCY=3              # Every 3 minutes
# SHORT_SELLING_FREQUENCY=15           # Every 15 minutes
# SHORT_TERM_FREQUENCY=60              # Every hour

# ============================================================================
# ADVANCED CONFIGURATION
# ============================================================================

# Database and caching
DATABASE_URL=sqlite+aiosqlite:///./trading_system.db

# API Configuration
AUTO_TRADE=false                        # Set to true only when ready for live trading
DRY_RUN=true                           # Keep true for testing, false for live trading

# Logging
LOG_LEVEL=INFO
LOG_FILE=logs/trading_system.log
LOG_RETENTION_DAYS=14

# Security
SECRET_KEY=your_secret_key_here
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Server Configuration  
HOST=0.0.0.0
PORT=8000

# ============================================================================
# MONITORING AND ALERTS
# ============================================================================

# System monitoring
ENABLE_SYSTEM_STATUS_CHECKS=true

# Performance thresholds for alerts:
# - Success rate below 80%: Alert triggered
# - Execution time above 5 minutes: Alert triggered  
# - No signals for 2+ hours (day trading): Alert triggered
# - System resource usage above 90%: Alert triggered

# ============================================================================
# IIFL API CONFIGURATION
# ============================================================================

# Add your IIFL credentials:
# IIFL_CLIENT_ID=your_client_id
# IIFL_AUTH_CODE=your_auth_code  
# IIFL_APP_SECRET=your_app_secret
# IIFL_BASE_URL=https://api.iiflcapital.com/v1

# ============================================================================
# USAGE EXAMPLES
# ============================================================================

# Conservative Configuration (Recommended for beginners):
# DAY_TRADING_FREQUENCY=15
# SHORT_SELLING_FREQUENCY=60
# SHORT_TERM_FREQUENCY=240
# MAX_CONCURRENT_STRATEGIES=2

# Aggressive Configuration (Experienced traders with good resources):
# DAY_TRADING_FREQUENCY=5
# SHORT_SELLING_FREQUENCY=15  
# SHORT_TERM_FREQUENCY=60
# MAX_CONCURRENT_STRATEGIES=4

# Balanced Configuration (Recommended default):
# DAY_TRADING_FREQUENCY=10
# SHORT_SELLING_FREQUENCY=30
# SHORT_TERM_FREQUENCY=120
# MAX_CONCURRENT_STRATEGIES=3