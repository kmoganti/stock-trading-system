# LLM Signal Validation Configuration
# Add these settings to your .env file to enable AI-powered signal validation

# ================================
# LLM VALIDATION SETTINGS
# ================================

# Enable/Disable LLM validation
LLM_VALIDATION_ENABLED=false

# Primary LLM provider (openai, anthropic, perplexity)
LLM_PRIMARY_PROVIDER=openai

# API timeout for LLM calls (seconds)
LLM_VALIDATION_TIMEOUT=10

# Minimum confidence threshold for signal approval (0.0-1.0)
LLM_MIN_CONFIDENCE=0.7

# Validation mode: all, high_value, selective
# - all: Validate every signal
# - high_value: Only validate signals above certain value threshold
# - selective: Validate based on confidence/risk criteria
LLM_VALIDATION_MODE=all

# ================================
# API KEYS (Required for LLM validation)
# ================================

# OpenAI API Key (for GPT-4 validation)
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=your_openai_api_key_here

# Anthropic API Key (for Claude validation)
# Get from: https://console.anthropic.com/
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Perplexity API Key (for real-time web search validation)
# Get from: https://www.perplexity.ai/settings/api
PERPLEXITY_API_KEY=your_perplexity_api_key_here

# ================================
# VALIDATION THRESHOLDS
# ================================

# High value threshold for selective validation (in INR)
LLM_HIGH_VALUE_THRESHOLD=50000

# Risk threshold for selective validation (0.0-1.0)
LLM_RISK_THRESHOLD=0.03

# Position size limits based on validation results
LLM_APPROVED_MAX_POSITION=1.0    # 100% of calculated position
LLM_CAUTION_MAX_POSITION=0.7     # 70% of calculated position
LLM_REJECT_MAX_POSITION=0.0      # 0% - block execution

# ================================
# MARKET CONTEXT INTEGRATION
# ================================

# Enable fetching news sentiment for validation
LLM_ENABLE_NEWS_CONTEXT=false

# Enable sector analysis for validation
LLM_ENABLE_SECTOR_CONTEXT=true

# Enable market volatility analysis
LLM_ENABLE_VOLATILITY_CONTEXT=true

# ================================
# COST CONTROL
# ================================

# Maximum LLM API calls per day
LLM_MAX_CALLS_PER_DAY=1000

# Enable caching of similar signal validations
LLM_ENABLE_VALIDATION_CACHE=true

# Cache expiration time (hours)
LLM_CACHE_EXPIRATION_HOURS=24

# ================================
# EXAMPLE USAGE SCENARIOS
# ================================

# SCENARIO 1: Conservative Trading
# Use high confidence threshold and validate all signals
# LLM_VALIDATION_ENABLED=true
# LLM_MIN_CONFIDENCE=0.8
# LLM_VALIDATION_MODE=all
# LLM_PRIMARY_PROVIDER=openai

# SCENARIO 2: Cost-Conscious Validation
# Only validate high-value trades to save on API costs
# LLM_VALIDATION_ENABLED=true
# LLM_VALIDATION_MODE=high_value
# LLM_HIGH_VALUE_THRESHOLD=100000
# LLM_PRIMARY_PROVIDER=anthropic

# SCENARIO 3: Risk-Focused Validation
# Validate only risky signals based on stop-loss distance
# LLM_VALIDATION_ENABLED=true
# LLM_VALIDATION_MODE=selective
# LLM_RISK_THRESHOLD=0.05

# SCENARIO 4: Real-time Market Analysis (Perplexity)
# Use Perplexity for current market context and news integration
# LLM_VALIDATION_ENABLED=true
# LLM_PRIMARY_PROVIDER=perplexity
# LLM_MIN_CONFIDENCE=0.75
# LLM_VALIDATION_MODE=all

# ================================
# VALIDATION WORKFLOW
# ================================

# 1. Signal generated by strategy
# 2. Check if validation is enabled and signal meets criteria
# 3. Send signal data + market context to LLM
# 4. LLM analyzes and returns validation result
# 5. System decides whether to execute based on validation
# 6. Validation metadata is stored with signal for audit trail

# ================================
# API COST ESTIMATES (Approximate)
# ================================

# OpenAI GPT-4:
# - ~$0.03 per validation (1000 tokens input + 500 tokens output)
# - 100 validations/day = ~$3/day

# Anthropic Claude-3:
# - ~$0.02 per validation 
# - 100 validations/day = ~$2/day

# Perplexity AI (with web search):
# - ~$0.01-0.02 per validation (including real-time market data)
# - 100 validations/day = ~$1-2/day
# - Benefits: Real-time market news and data integration

# Cost optimization tips:
# 1. Use selective validation mode for high-value trades only
# 2. Enable caching to avoid re-validating similar signals
# 3. Set reasonable daily limits
# 4. Consider using rule-based validation for low-risk signals